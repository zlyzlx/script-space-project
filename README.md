# 剧本杀拼车小程序

## 项目简介

剧本杀拼车小程序是一个专为剧本杀爱好者设计的出行拼车平台。通过这个小程序，用户可以轻松找到同路的剧本杀玩家，一起拼车前往游戏地点，既能节省交通费用，又能提前认识游戏伙伴，增进交流。

## 核心功能

### 🚗 拼车功能
- **发布拼车**：用户可以发布自己的拼车信息，包括目的地、时间、费用等
- **查找拼车**：浏览其他用户发布的拼车信息，筛选合适的拼车
- **参与拼车**：一键参与心仪的拼车，与组织者和其他参与者建立联系
- **退出拼车**：支持在合理时间内退出拼车

### 👤 用户管理
- **微信登录**：使用微信账号快速登录，无需繁琐注册
- **个人中心**：管理个人信息，查看拼车历史
- **我的拼车**：查看自己发布的拼车信息，管理参与者
- **我的行程**：查看参与的拼车行程，联系组织者

### 💬 社交互动
- **联系功能**：支持拨打电话联系组织者或参与者
- **评价系统**：完成拼车后可以对体验进行评价
- **分享功能**：支持分享拼车信息给好友

## 技术架构

### 前端技术
- **框架**：微信小程序原生开发
- **UI组件**：自定义组件 + 微信官方组件
- **状态管理**：页面级状态管理
- **网络请求**：wx.cloud.callFunction (云函数调用)

### 后端技术
- **云开发**：微信小程序云开发
- **数据库**：云开发数据库 (MongoDB)
- **云函数**：Node.js 运行时
- **存储**：云开发存储（用于头像等文件）

### 云函数列表
- `carpool-list` - 获取拼车列表
- `carpool-detail` - 获取拼车详情  
- `carpool-create` - 创建拼车
- `carpool-update` - 更新拼车信息
- `carpool-join` - 参与拼车
- `carpool-quit` - 退出拼车
- `user-carpools` - 获取用户发布的拼车
- `user-rides` - 获取用户参与的拼车

## 页面结构

```
pages/
├── carpool/                 # 拼车列表页（首页）
│   ├── carpool.js
│   ├── carpool.wxml
│   ├── carpool.wxss
│   └── carpool.json
├── carpool-detail/          # 拼车详情页
├── publish-carpool/         # 发布拼车页
├── my-carpools/            # 我的拼车页
├── my-rides/               # 我的行程页
└── profile/                # 个人中心页
```

## 数据结构

### 拼车信息 (carpools)
```javascript
{
  _id: "拼车ID",
  _openid: "创建者openid", 
  organizerId: "组织者ID",
  activityName: "活动名称",
  date: "活动日期",
  time: "活动时间",
  location: "地点名称", 
  fullAddress: "详细地址",
  maxCount: 6, // 最大人数
  currentCount: 3, // 当前人数
  price: 25, // 拼车费用
  status: "招募中", // 状态
  description: "活动描述",
  requirements: "参与要求",
  contactInfo: "联系方式",
  notes: "备注信息",
  publishTime: "发布时间",
  updateTime: "更新时间"
}
```

### 拼车参与者 (carpool_participants)
```javascript
{
  _id: "参与记录ID",
  _openid: "参与者openid",
  carpoolId: "拼车ID", 
  userId: "参与者ID",
  status: "active", // 状态：active(参与中)、quit(已退出)
  joinTime: "参与时间",
  quitTime: "退出时间"
}
```

### 用户信息 (users)
```javascript
{
  _id: "用户ID",
  _openid: "用户openid",
  nickname: "用户昵称",
  avatar: "头像URL", 
  phone: "联系电话",
  createTime: "创建时间",
  updateTime: "更新时间"
}
```

## 功能详情

### 拼车列表页
- 展示所有可参与的拼车信息
- 支持按日期、状态筛选
- 支持搜索功能
- 分页加载，优化性能

### 拼车详情页  
- 显示拼车的完整信息
- 展示组织者和参与者信息
- 提供参与/退出拼车功能
- 支持联系组织者

### 发布拼车页
- 表单式发布拼车信息
- 支持选择地点（调用微信位置API）
- 实时表单验证
- 支持编辑已发布的拼车

### 我的拼车页
- 管理自己发布的拼车
- 查看参与者列表
- 支持取消拼车
- 分享拼车信息

### 我的行程页
- 查看参与的所有拼车
- 联系组织者功能
- 支持退出拼车
- 拼车完成后评价功能

## 开发指南

### 环境要求
- 微信开发者工具
- 微信小程序开发者账号
- 云开发环境

### 快速开始
1. 克隆项目到本地
2. 使用微信开发者工具打开项目
3. 配置小程序AppID
4. 开通云开发服务
5. 部署云函数
6. 初始化数据库
7. 预览或真机调试

详细部署步骤请参考 [DEPLOYMENT.md](./DEPLOYMENT.md)

### 目录结构
```
script-space-project/
├── pages/                  # 页面文件
├── components/             # 自定义组件  
├── cloudfunctions/         # 云函数
├── database/              # 数据库初始化脚本
├── utils/                 # 工具函数
├── app.js                 # 小程序入口文件
├── app.json              # 小程序配置文件
├── app.wxss              # 全局样式文件
├── project.config.json   # 项目配置文件
├── README.md             # 项目说明文档
└── DEPLOYMENT.md         # 部署指南
```

## 版本信息

- **当前版本**：v1.0.0
- **发布日期**：2024年1月
- **更新内容**：
  - 基础拼车功能实现
  - 云开发后端集成
  - 用户管理系统
  - 社交互动功能

## 后续规划

### v1.1.0 计划功能
- [ ] 消息通知系统
- [ ] 地图导航集成
- [ ] 支付功能集成
- [ ] 拼车历史统计

### v1.2.0 计划功能  
- [ ] 群聊功能
- [ ] 拼车推荐算法
- [ ] 用户信用体系
- [ ] 活动预约功能

## 联系我们

如果您在使用过程中遇到问题或有改进建议，欢迎通过以下方式联系我们：

- **项目地址**：GitHub Repository
- **问题反馈**：GitHub Issues
- **技术交流**：微信群 (扫码加入)

---

**让拼车更简单，让剧本杀更有趣！** 🎭🚗 